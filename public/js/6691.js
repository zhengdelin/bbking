"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6691],{1946:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#tinymce{box-shadow:0 2px 8px 0 rgba(0,0,0,.2)}.tox.tox-tinymce-inline .tox-editor-header{border-bottom:0!important;border-radius:0!important}#tinymce_editor{background-color:#fff;border:1px solid #ccc;border-top:0;font-size:20px;line-height:1;text-align:left;vertical-align:top}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks):before{left:15px!important;top:25px}",""]);const o=i},6691:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(9200),i={class:"col-span-6 md:col-span-3"},o={class:"col-span-6 md:col-span-3"};var l=n(4146),a=n(7965),u=n(7736),c=n(5845),s=n(4010),p=n(2262),d=n(8637),m=n(2119),f=n(6252),g=n(1067),y=n(5431);const v={components:{SaveButtonVue:s.Z,TinymceEditorVue:l.Z,AdminInputFormVue:a.Z,InputTextVue:u.Z,InputSelectVue:c.Z,TitleItem:y.Z},props:{info:{type:String,default:function(){}}},setup:function(e){var t=(0,m.tv)(),n=(0,d.oR)(),r=n.dispatch,i=n.state,o=(0,f.Fl)((function(){return e.info}));o.value||t.push({name:"admin-articles"});var l=(0,f.Fl)((function(){return i.globalHandler.categories})),a=(0,p.iH)();a.value=o.value?JSON.parse(o.value):{};return{TITLE:g.R,categories:l,article:a,handleUpdateArticle:function(){a.value.content=tinymce.get("tinymce_editor").getContent(),r("articleHandler/updateArticle",a.value).then((function(){"error"!==i.status&&t.push({name:"admin-articles",params:{update_article:!0}})}))},dispatch:r}}};const b=(0,n(3744).Z)(v,[["render",function(e,t,n,l,a,u){var c=(0,r.up)("title-item"),s=(0,r.up)("save-button-vue"),p=(0,r.up)("input-text-vue"),d=(0,r.up)("input-select-vue"),m=(0,r.up)("admin-input-form-vue"),f=(0,r.up)("tinymce-editor-vue");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c,{title:"文章 - 編輯文章",return_to_route_name:"admin-articles"}),(0,r.Wm)(c,{title:"文章資訊"},{button:(0,r.w5)((function(){return[(0,r.Wm)(s,{onClick:l.handleUpdateArticle},null,8,["onClick"])]})),_:1}),(0,r.Wm)(m,{class:"mb-2"},{form_items:(0,r.w5)((function(){return[(0,r._)("div",i,[(0,r.Wm)(p,{focus:!0,trim:!0,required:!0,title:l.TITLE.title,modelValue:l.article.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.article.title=e}),onChange:t[1]||(t[1]=function(e){return l.dispatch("articleHandler/checkTitle",l.article.title)})},null,8,["title","modelValue"])]),(0,r._)("div",o,[(0,r.Wm)(d,{required:!0,title:l.TITLE.category,option_group:l.categories,modelValue:l.article.category_id,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.article.category_id=e})},null,8,["title","option_group","modelValue"])])]})),_:1}),(0,r.Wm)(f,{initial_value:l.article.content},null,8,["initial_value"])],64)}]])},7965:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(9200),i={class:"bg-white rounded-md border-gray-500"},o={class:"p-4"},l={class:"grid grid-cols-6 gap-4 items-center"};const a={components:{},props:{input_cols:{type:Array,default:function(){return[{col_span:"col-span-2",component:"input-text-vue",trim:!0,title:String,model:String,func_call:String,func_datas:Array}]}},data_source:{type:Object||Array,default:function(){return{}||[]}}}};const u=(0,n(3744).Z)(a,[["render",function(e,t,n,a,u,c){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",o,[(0,r._)("div",l,[(0,r.WI)(e.$slots,"form_items")])])])}]])},4010:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(9200),i={class:"bg-blue-500 hover:bg-blue-400 text-white disabled:bg-blue-400"},o=(0,r._)("span",null,"儲存",-1);const l={};const a=(0,n(3744).Z)(l,[["render",function(e,t,n,l,a,u){var c=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("button",i,[(0,r.Wm)(c,{type:"save",class:"mr-1"}),o])}]])},5845:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(9200),i={class:"font-bold"},o={key:0,class:"text-red-500"},l={class:"w-full py-1 pl-3"},a=["value"],u=["label"],c=["value"];var s=n(2262),p=n(8637),d=n(6252);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y={inheritAttrs:!1,props:{title:{type:String,default:""},required:{type:Boolean,default:!1},option_group:{type:Object||Array,default:function(){return[]||0}},options:{type:[Array,Object],default:function(){return[]}},labelKey:{type:String,default:"name"},valueKey:{type:String,default:"id"},group:{type:Boolean,default:!1}},emits:{"update:modelValue":{type:String,default:""}},setup:function(e,t){var n=t.attrs,r=t.emit,i=((0,p.oR)().dispatch,(0,s.BK)(e).valChangeFun,(0,d.Fl)({get:function(){return n.modelValue},set:function(e){r("update:modelValue",e)}}));return f(f({},(0,s.BK)(e)),{},{modelValue:i})}};const v=(0,n(3744).Z)(y,[["render",function(e,t,n,s,p,d){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[n.required?((0,r.wg)(),(0,r.iD)("span",o,"* ")):(0,r.kq)("",!0),(0,r._)("span",null,(0,r.zw)(n.title),1)]),(0,r._)("div",l,[(0,r.wy)((0,r._)("select",{class:"font-bold w-full border-gray-500 border-opacity-50 border-[1px] border-solid rounded-sm py-1 px-2","onUpdate:modelValue":t[0]||(t[0]=function(e){return s.modelValue=e})},[n.group?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(n.option_group,(function(e,t){return(0,r.wg)(),(0,r.iD)("optgroup",{key:t,label:t},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e[n.valueKey],value:e[n.valueKey]},(0,r.zw)(e[n.labelKey]),9,c)})),128))],8,u)})),128)):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(n.options,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e[n.valueKey],value:e[n.valueKey]},(0,r.zw)(e[n.labelKey]),9,a)})),128))],512),[[r.bM,s.modelValue]])])],64)}]])},7736:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(9200),i={class:"font-bold"},o={key:0,class:"text-red-500"},l={class:"font-MicrosoftJhengHei"},a={class:"w-full py-1"},u=["type","value"];var c=n(6252),s=n(2262);const p={inheritAttrs:!1,props:{title:{type:String,default:""},focus:{type:Boolean,default:!1},trim:{type:Boolean,default:!0},isNumber:{type:Boolean,default:!1},required:{type:Boolean,default:!1},type:{type:String,default:"text"}},emits:{"update:modelValue":{type:String,default:""}},setup:function(e,t){var n=t.attrs,r=t.emit,i=(0,s.iH)(),o=e.title,l=e.trim,a=e.focus,u=e.isNumber,p=e.type,d=(0,c.Fl)((function(){return e.required}));return(0,c.bv)((function(){a&&i.value.focus()})),{title:o,attrs:n,required:d,field:i,emitInput:function(e){var t=e.target.value;l&&(t=t.trim()),u&&(t=t.replace(/[^0-9]/gi,"")),r("update:modelValue",t)},type:p}}};const d=(0,n(3744).Z)(p,[["render",function(e,t,n,c,s,p){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",i,[c.required?((0,r.wg)(),(0,r.iD)("span",o,"* ")):(0,r.kq)("",!0),(0,r._)("span",l,(0,r.zw)(c.title),1)]),(0,r._)("div",a,[(0,r._)("input",(0,r.dG)({class:"w-full h-[40px] border-gray-500 border-opacity-50 border-[1px] rounded-sm pl-4",type:c.type||"text"},c.attrs,{ref:"field",value:c.attrs.modelValue,onInput:t[0]||(t[0]=function(){return c.emitInput&&c.emitInput.apply(c,arguments)})}),null,16,u)])])}]])},4146:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(9200),i={class:"bg-white no-tailwind-base"},o={id:"tinymce_toolbar",class:"sticky z-[2] top-0 h-[78px]"},l=["innerHTML"];var a=n(6252),u=n(2262),c=n(2119);const s={props:{initial_value:{type:String,default:""},placeholder:{type:String,default:"...請輸入文字"}},setup:function(e){var t=(0,u.iH)(!1),n=(0,u.BK)(e),r=n.initial_value,i={selector:"#tinymce_editor",inline:!0,placeholder:n.placeholder.value,fixed_toolbar_container:"#tinymce_toolbar",toolbar_persist:!0,language_url:"../../assets/tinymce/langs/zh_TW.js",language:"zh_TW",images_upload_url:"/api/article/admin/uploadArticlePic",images_upload_base_path:"/",convert_urls:!1,block_unsupported_drop:!0,plugins:"preview searchreplace autolink link image table autoresize autosave charmap code emoticons\n            help insertdatetime lists media quickbars template wordcount",toolbar:"newdocument preview restoredraft | undo redo searchreplace | \n      formatting text lists| alignment paragraphs styles|insertion|code wordcount help",toolbar_groups:{formatting:{icon:"format",tooltip:"格式",items:"color bold italic strikethrough underline| superscript subscript | removeformat"},text:{icon:"change-case",tooltip:"文字",items:"forecolor backcolor lineheight |  fontfamily fontsize"},alignment:{icon:"align-left",tooltip:"對齊",items:"alignleft aligncenter alignright alignjustify | outdent indent"},paragraphs:{icon:"paragraph",tooltip:"段落",items:"H1 h2 h3 h4 h5 h6 div"},lists:{icon:"ordered-list",tooptip:"列表",items:"numlist bullist"},insertion:{icon:"plus",tooltip:"新增",items:"image media table |hr link emoticons charmap insertdatetime | template "}},quickbars_insert_toolbar:" image media table |hr link emoticons charmap insertdatetime | template",quickbars_selection_toolbar:"quicklink| styles | forecolor backcolor fontfamily fontsize",autosave_interval:"30s",toolbar_sticky:!0,contextmenu:"redo undo",skin:"tinymce-5",templates:[{title:"Date modified example",description:"Adds a timestamp indicating the last time the document modified.",content:'<p>Last Modified: <time class="mdate">This will be replaced with the date modified.</time></p>'}]};return(0,a.bv)((function(){tinymce.init(i),console.log("tinymce->",e),e.initial_value&&tinymce.get("tinymce_editor").setContent(e.initial_value),t.value=!0})),(0,c.iS)((function(){tinymce.get("tinymce_editor").destroy()})),{initial_value:r,show:t}}};var p=n(3379),d=n.n(p),m=n(1946),f={insert:"head",singleton:!1};d()(m.Z,f);m.Z.locals;const g=(0,n(3744).Z)(s,[["render",function(e,t,n,a,u,c){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(r.uT,{name:"fade"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r._)("div",o,null,512),[[r.F8,a.show]])]})),_:1}),(0,r._)("div",{id:"tinymce_editor",class:"bg-white article-box min-h-[20rem] px-3 py-1",innerHTML:a.initial_value},null,8,l)])}]])},5431:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(9200),i={class:"flex items-center justify-between"},o={class:"grid grid-flow-col gap-4"};var l=n(6252),a=n(8637);const u={props:{title:{type:String,default:"管理"},return_to_route_name:{type:String,default:""},py:{type:String,default:""}},setup:function(e){var t=(0,a.oR)().commit,n=e.return_to_route_name,r=e.py;return{title:(0,l.Fl)((function(){return e.title})),return_to_route_name:n,py:r,commit:t}}};const c=(0,n(3744).Z)(u,[["render",function(e,t,n,l,a,u){var c=(0,r.up)("svg-render-vue"),s=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",i,[l.return_to_route_name?((0,r.wg)(),(0,r.j4)(s,{key:0,to:{name:l.return_to_route_name},class:"text-blue-500",onClick:t[0]||(t[0]=function(e){return l.commit("clearStatus")})},{default:(0,r.w5)((function(){return[(0,r.Wm)(c,{type:"return",size:"lg"})]})),_:1},8,["to"])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"return_router"),(0,r._)("div",{class:(0,r.C_)(["flex-auto px-2 py-4 font-bold text-2xl",l.py])},(0,r.zw)(l.title),3),(0,r._)("div",o,[(0,r.WI)(e.$slots,"button")])])}]])}}]);