"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[444],{4080:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),u=n.n(r)()((function(e){return e[1]}));u.push([e.id,".appear-left-enter-active[data-v-042c321a]{transition:opacity 1s,transform .5s}.appear-left-leave-active[data-v-042c321a]{transition:opacity .1s linear,transform .2s linear}.appear-left-enter-from[data-v-042c321a]{opacity:0;transform:translateX(-20px)}.appear-left-leave-to[data-v-042c321a]{opacity:0;transform:translateX(15px)}.appear-left-enter-to[data-v-042c321a],.appear-left-leave-from[data-v-042c321a]{opacity:1;transform:translateX(0)}",""]);const a=u},9181:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),u=n.n(r)()((function(e){return e[1]}));u.push([e.id,".router-link-exact-active[data-v-30034ce8]{color:#06b6d4}",""]);const a=u},2188:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),u=n.n(r)()((function(e){return e[1]}));u.push([e.id,".title-enter-active,.title-leave-active{transition:all 1s}.title-enter-from,.title-leave-to{opacity:0;transform:translateX(-50%)}",""]);const a=u},2153:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),u=n.n(r)()((function(e){return e[1]}));u.push([e.id,".router-link-exact-active[data-v-66e9842e]{color:#9333ea}",""]);const a=u},5444:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(9200),u={class:"user flex flex-1 pt-3"},a={class:"w-[95%] h-full md:py-2 px-4 border-0 md:border-[1px] border-gray-300 rounded-lg"};var o=n(7757),l=n.n(o),i=n(2262),c=n(6252),s=n(2119),v=n(8637),f=n(8196),p=n(7436);function d(e,t,n,r,u,a,o){try{var l=e[a](o),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,u)}const h={components:{MenuContainer:f.Z,MenuItem:p.Z},setup:function(){var e=(0,s.yj)(),t=(0,s.tv)(),n=(0,v.oR)(),r=n.state,u=n.dispatch,a=(0,i.iH)(!1),o=(0,c.Fl)((function(){return"user"===e.name})),f=(0,c.Fl)((function(){return r.user_info.name})),p=function(){var e,n=(e=l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u("userHandler/logout").then((function(){r.is_login||t.push({name:"user-login"})}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,u){var a=e.apply(t,n);function o(e){d(a,r,u,o,l,"next",e)}function l(e){d(a,r,u,o,l,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,c.bv)((function(){console.log("user onMounted"),setTimeout((function(){a.value=!0}),300)})),{show:a,is_now_user:o,username:f,user_menu_lists:[{route_name:"user-profile",text:"個人資料"},{route_name:"user-shopping_cart",text:"購物車"},{route_name:"user-article_collection",text:"文章收藏"},{route_name:"user-shopping_record",text:"購買紀錄"}],handleLogout:p}}};const m=(0,n(3744).Z)(h,[["render",function(e,t,n,o,l,i){var c=(0,r.up)("menu-item"),s=(0,r.up)("menu-container"),v=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",{class:(0,r.C_)([{"hidden md:block":!o.is_now_user},"w-full md:w-[16.666%]"])},[(0,r.Wm)(r.uT,{name:"fade"},{default:(0,r.w5)((function(){return[o.show?((0,r.wg)(),(0,r.j4)(s,{key:0,enable_collapse:!1,title:"你好 ".concat(o.username),class:"h-full text-black border-0 md:border-r-[1.5px] border-gray-300 text-center"},{menu_item:(0,r.w5)((function(e){var n=e.collapse_menu;return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(o.user_menu_lists,(function(e){return(0,r.wg)(),(0,r.j4)(c,{key:e.text,item:e,collapse:n},null,8,["item","collapse"])})),128)),(0,r._)("div",{class:"w-full text-center absolute bottom-0 mb-4 hover:cursor-pointer hover:text-red-500 font-bold",onClick:t[0]||(t[0]=function(){return o.handleLogout&&o.handleLogout.apply(o,arguments)})}," 登出 ")]})),_:1},8,["title"])):(0,r.kq)("",!0)]})),_:1})],2),(0,r._)("div",{class:(0,r.C_)(["flex items-center justify-center w-full",{"hidden md:flex":o.is_now_user}])},[(0,r._)("div",a,[(0,r.Wm)(v,null,{default:(0,r.w5)((function(e){var t=e.Component;return[(0,r.Wm)(r.uT,{name:"roll-up",mode:"out-in"},{default:(0,r.w5)((function(){return[(0,r.wy)(((0,r.wg)(),(0,r.j4)((0,r.LL)(t),null,null,512)),[[r.F8,o.show]])]})),_:2},1024)]})),_:1})])],2)])}]])},8196:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(9200),u={key:1,class:"h-12 flex-cc font-bold"};var a=n(2262),o=n(6252);const l={name:"MenuContainer",props:{title:{type:String,default:""},enable_collapse:{type:Boolean,default:!0},menu_tree:{type:[Object,Array],default:function(){return[]||0}}},setup:function(e){var t=(0,o.Fl)((function(){return e.enable_collapse})),n=(0,o.Fl)((function(){return e.title})),r=(0,a.iH)(t.value),u=(0,o.Fl)((function(){return t.value?r.value?"w-[4.5rem]":"w-52":""})),l=(0,a.iH)(!1);(0,o.bv)((function(){setTimeout((function(){l.value=!0}),500)}));var i=(0,a.qj)(e.menu_tree),c=function(e,t){var n=i[e];return t.forEach((function(e){n=n.children[e]})),n},s=function e(t){var n=0;return t.children&&0!==t.height&&(t.children.forEach((function(t){n+=e(t)})),n+=t.height?t.height:0),n};return(0,o.JJ)("setMenuTreeHeight",(function(e,t,n){c(e,t).height=n})),(0,o.JJ)("getMenuHeight",(function(e,t){if(0!==Object.keys(i).length){var n=c(e,t);return s(n)}return 0})),{title:n,enable_collapse:t,collapse_menu:r,show_title:l,getMenuWidth:u,collapseMenu:function(){r.value=!r.value}}}};var i=n(3379),c=n.n(i),s=n(2188),v={insert:"head",singleton:!1};c()(s.Z,v);s.Z.locals;const f=(0,n(3744).Z)(l,[["render",function(e,t,n,a,o,l){var i=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("div",{id:"menu-container",class:(0,r.C_)(["sticky top-0 duration-700",a.getMenuWidth])},[a.enable_collapse?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"absolute z-10 top-4 -right-4 w-7 h-7 bg-purple-500 rounded-full flex items-center justify-center hover:cursor-pointer",onClick:t[0]||(t[0]=function(){return a.collapseMenu&&a.collapseMenu.apply(a,arguments)})},[(0,r.Wm)(i,{type:"arrow_right",class:(0,r.C_)([{" rotate-180":!a.collapse_menu},"duration-500"])},null,8,["class"])])):(0,r.kq)("",!0),a.title?((0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(r.uT,{name:"title"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r._)("span",null,(0,r.zw)(a.title),513),[[r.F8,a.show_title]])]})),_:1})])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"menu_item",{collapse_menu:a.collapse_menu})],2)}]])},7436:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6252),u=n(2262),a=n(9963);const o={name:"FloatMenuItem",props:{item:{type:Object,default:function(){return{route_name:"",url:"",text:"",svg_name:"",children:[]}}},index:{type:Number,default:0},layer:{type:Number,default:0}},setup:function(e,t){var n=t.slots,o=e.item,l=o.text,i=o.route_name,c=o.url,s=o.svg_name,v=o.children,f=e.index,p=(0,u.iH)(!1),d=(0,r.Fl)((function(){return i?{name:i}:c?{path:c}:""})),h=s?(0,r.h)("div",{class:"pr-2 h-[24px]"},(0,r.h)("div",{class:"w-4"},(0,r.h)((0,r.up)("svg-render-vue"),{type:s}))):null,m=(0,r.h)(a.Transition,{name:"leave-to-left-500"},(function(){return(0,r.h)("span",{class:"whitespace-nowrap font-semibold"},l)})),y=(0,r.Fl)((function(){return v?(0,r.h)((0,r.up)("svg-render-vue"),{type:"arrow_right",class:"absolute right-2 duration-500 ".concat(p.value?"rotate-180":"")}):""})),g=0===f?(0,r.h)("div",{class:"w-3 h-3 rotate-45 bg-zinc-900 absolute -left-1.5 top-3"}):"",_=(0,r.h)("div",{class:"w-[15px] h-[2.5rem] absolute -left-[15px]"});return function(){return(0,r.h)(d.value?(0,r.up)("router-link"):"div",{onmouseover:function(){p.value=!0},onmouseleave:function(){p.value=!1},class:"flex items-center block relative hover:text-cyan-500 hover:cursor-pointer py-2 pl-3 pr-10",to:d},d.value?function(){return[g,_,h,m,y.value,n.float_menu_container({hover:p.value})]}:[g,_,h,m,y.value,n.float_menu_container({hover:p.value})])}}};var l=n(3379),i=n.n(l),c=n(9181),s={insert:"head",singleton:!1};i()(c.Z,s);c.Z.locals;var v=n(3744);const f={name:"FloatMenuContainer",components:{FloatMenuItem:(0,v.Z)(o,[["__scopeId","data-v-30034ce8"]])},props:{lists:{type:Array,default:function(){return[]}},toggleMenu:{type:Function,default:function(){}},layer:{type:Number,default:1},hover:{type:Boolean,default:!0}},setup:function(e){var t=(0,u.iH)(),n=(0,r.Fl)((function(){return e.lists})),o=(0,r.Fl)((function(){return e.toggleMenu})),l=(0,r.Fl)((function(){return e.layer})),i=(0,r.Fl)((function(){return t.value?t.value.clientWidth:0})),c=(0,r.Fl)((function(){return{top:1===l.value?"11px":"0px",right:"-".concat(i.value+15,"px")}})),s=(0,r.Fl)((function(){return n.value.map((function(e,t){return(0,r.h)((0,r.up)("float-menu-item"),{item:e,key:t,index:t,layer:l.value,onClick:function(){l.value<=1&&o.value()}},{float_menu_container:function(t){var n=t.hover;return e.children?(0,r.h)((0,r.up)("float-menu-container"),{layer:l.value+1,lists:e.children,toggleMenu:o.value,hover:n}):""}})}))})),v=(0,r.Fl)((function(){return e.hover}));return function(){return(0,r.h)(a.Transition,{name:"appear-left"},(function(){return v.value?(0,r.h)("div",{id:"layer-".concat(l.value),class:"z-10 bg-zinc-900 absolute rounded text-white divide-y divide-gray-400",style:c.value,ref:t},s.value):""}))}}};var p=n(4080),d={insert:"head",singleton:!1};i()(p.Z,d);p.Z.locals;function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y={name:"MenuItem",components:{FloatMenuContainer:(0,v.Z)(f,[["__scopeId","data-v-042c321a"]])},props:{item:{type:Object,default:function(){return{route_name:"",url:"",text:"",svg_name:"",children:[]}}},collapse:{type:Boolean,default:!0},box_py:{type:Number,default:3},text_pl:{type:Number,default:0},position:{type:Array,default:function(){return[]}},tree_root:{type:[String,Number],default:0}},setup:function(e){var t=(0,r.f3)("setMenuTreeHeight"),n=(0,r.f3)("getMenuHeight"),o=(0,r.Fl)((function(){return e.item})),l=(0,r.Fl)((function(){return o.value.text})),i=(0,r.Fl)((function(){return o.value.route_name})),c=(0,r.Fl)((function(){return o.value.url})),s=(0,r.Fl)((function(){return o.value.svg_name})),v=(0,r.Fl)((function(){return o.value.children?o.value.children:""})),f=e.box_py,p=e.text_pl,d=e.tree_root,m=e.position,y=(0,r.Fl)((function(){return e.collapse})),g=(0,u.iH)(!1),_=(0,u.iH)(!1),w=(0,u.iH)(window.innerWidth);window.addEventListener("resize",(function(){w.value=window.innerWidth}));var b=(0,r.Fl)((function(){var e=p;return w.value>1280||(w.value>1080?e--:e=1),{"padding-left":"".concat(e,"rem")}})),x=(0,r.Fl)((function(){return i.value?{name:i.value}:c.value?{path:c.value}:""})),F=f>1?f-1:1,k=8*F+24,M=(0,r.Fl)((function(){var e=n(d,m);return g.value?{height:e+"px",overflow:"visible"}:{height:0,opacity:0,overflow:"hidden"}})),Z=function(e){var t=k+n(d,e);return g.value?{height:t+"px"}:{height:0,opacity:0}},C=function(){g.value=!g.value,t(d,m,g.value?k*(v.value?v.value.length:1):0)},j=s.value?(0,r.h)("div",{class:"pl-6 mr-8 h-[24px]"},(0,r.h)("div",{class:"w-4"},(0,r.h)((0,r.up)("svg-render-vue"),{type:s.value}))):null,H=(0,r.h)(a.Transition,{name:"leave-to-left-500"},(function(){return y.value?"":(0,r.h)("span",{class:"pl-2 whitespace-nowrap font-semibold",style:b.value},l.value)})),I=(0,r.Fl)((function(){return v.value&&!y.value?(0,r.h)("div",{class:"inline-block absolute right-4 ",style:{top:4*f+"px"}},(0,r.h)((0,r.up)("svg-render-vue"),{type:"arrow_down",class:"duration-500 ".concat(_.value?"-rotate-90":"")})):null})),T=(0,r.Fl)((function(){return v.value?(0,r.h)((0,r.up)("float-menu-container"),{lists:v.value,toggleMenu:C,hover:_.value}):""})),W=(0,r.Fl)((function(){return v.value?(0,r.h)("div",{class:"transition-[height,opacity] duration-500",style:M.value},v.value.map((function(e,t){return(0,r.h)((0,r.up)("menu-item"),{item:e,collapse:y.value,box_py:F,text_pl:p+1,class:"transition-[height,opacity] duration-500",style:Z([].concat(h(m),[t])),tree_root:d,position:[].concat(h(m),[t])})}))):""})),A=(0,r.h)((0,r.up)("router-link"),{class:"".concat(j?"flex":""),to:x.value},(function(){return[j,H]})),S=x.value&&v.value||!x.value?"div":(0,r.up)("router-link"),z=(0,r.Fl)((function(){return(0,r.h)(S,{onmouseover:function(){_.value=!0},onmouseleave:function(){_.value=!1},onclick:function(){C()},to:x.value,class:"".concat(j?"flex":""," block relative hover:bg-cyan-200 hover:bg-opacity-30 hover:cursor-pointer py-").concat(f)},x.value?"div"!==S?function(){return[A,I.value,T.value]}:[A,I.value,T.value]:[j,H,I.value,T.value])}));return function(){return(0,r.h)("div",[z.value,W.value])}}};var g=n(2153),_={insert:"head",singleton:!1};i()(g.Z,_);g.Z.locals;const w=(0,v.Z)(y,[["__scopeId","data-v-66e9842e"]])}}]);