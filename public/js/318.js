"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[318],{1067:(e,t,n)=>{n.d(t,{R:()=>r});var r={account:"帳號",password:"密碼",check_password:"再次確認密碼",email:"電子郵件",name:"名稱",phone:"電話",address:"地址",title:"標題",content:"內容",category:"類別",category_id:"類別",category_name:"類別",category_group:"類別群組",category_group_id:"類別群組",category_group_name:"類別群組",eng_name:"英文名稱",url:"網址",introduction:"簡介",description:"描述",price:"價格",image:"圖片",updated_at:"上次更新",status:"狀態",logo:"Logo",business_hours:"營業時間",isHeadquarter:"為總公司"}},3973:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".input_single_checkbox input{border:1px solid hsla(0,0%,50%,.5);border-radius:10px;padding-right:1rem}",""]);const a=i},1946:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(3645),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,"#tinymce{box-shadow:0 2px 8px 0 rgba(0,0,0,.2)}.tox.tox-tinymce-inline .tox-editor-header{border-bottom:0!important;border-radius:0!important}#tinymce_editor{background-color:#fff;border:1px solid #ccc;border-top:0;font-size:20px;line-height:1;text-align:left;vertical-align:top}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks):before{left:15px!important;top:25px}",""]);const a=i},7318:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(9200),i={class:"col-span-3 md:col-span-2"},a={class:"col-span-3 md:col-span-1"},o={class:"col-span-6 md:col-span-3"};var l=n(6586),u=n(7965),s=n(6695),c=n(3325),p=n(6099),d=n(5431),m=n(1067),g=n(8637),f=n(6252),v=n(2262),_=n(2119),y=n(1014),h=n(4146);const b={components:{AdminInputFormVue:u.Z,InputTextVue:s.Z,InputSelectVue:c.Z,InputFileVue:p.Z,SaveButton:l.Z,TitleItem:d.Z,InputSingleCheckbox:y.Z,TinymceEditor:h.Z},props:{info:{type:String,default:function(){}}},setup:function(e){var t=(0,g.oR)(),n=t.dispatch,r=t.state,i=(0,_.tv)(),a=(0,f.Fl)((function(){return e.info}));a.value||i.push({name:"admin-products"});var o=(0,f.Fl)((function(){return r.globalHandler.categories})),l=(0,v.iH)();l.value=a.value?JSON.parse(a.value):{},l.value.old_image=l.value.image;var u=l.value.image,s=(0,v.qj)([{model:"name",focus:!0,required:!0,func_call:"productHandler/checkName"},{model:"introduction",func_call:"productHandler/checkIntroduction"},{model:"price",required:!0,isNumber:!0}]);return{TITLE:m.R,product:l,categories:o,image_src:u,input_cols:s,handleUpdateProduct:function(){l.value.description=tinymce.get("tinymce_editor").getContent(),n("productHandler/updateProduct",l.value).then((function(){"error"!==r.status&&i.push({name:"admin-products",params:{update_product:!0}})}))},fileChange:function(e){l.value.image=e},dispatch:n}}};const w=(0,n(3744).Z)(b,[["render",function(e,t,n,l,u,s){var c=(0,r.up)("title-item"),p=(0,r.up)("save-button"),d=(0,r.up)("input-text-vue"),m=(0,r.up)("input-select-vue"),g=(0,r.up)("input-single-checkbox"),f=(0,r.up)("input-file-vue"),v=(0,r.up)("admin-input-form-vue"),_=(0,r.up)("tinymce-editor");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c,{return_to_route_name:"admin-products",title:"產品 - 編輯產品"}),(0,r.Wm)(c,{title:"產品資訊"},{button:(0,r.w5)((function(){return[(0,r.Wm)(p,{onClick:l.handleUpdateProduct},null,8,["onClick"])]})),_:1}),(0,r.Wm)(v,{class:"mb-2"},{form_items:(0,r.w5)((function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.input_cols,(function(e){return(0,r.wg)(),(0,r.iD)("div",{class:"col-span-6 md:col-span-2",key:e.model},[(0,r.Wm)(d,{title:l.TITLE[e.model],isNumber:e.isNumber,focus:e.focus,required:e.required,modelValue:l.product[e.model],"onUpdate:modelValue":function(t){return l.product[e.model]=t},onChange:function(t){return e.func_call?l.dispatch(e.func_call,l.product[e.model]):null}},null,8,["title","isNumber","focus","required","modelValue","onUpdate:modelValue","onChange"])])})),128)),(0,r._)("div",i,[(0,r.Wm)(m,{required:!0,title:l.TITLE.category,option_group:l.categories,modelValue:l.product.category_id,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.product.category_id=e}),valChangeFun:"globalHandler/checkCategory"},null,8,["title","option_group","modelValue"])]),(0,r._)("div",a,[(0,r.Wm)(g,{required:!0,title:"上架",modelValue:l.product.status,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.product.status=e})},null,8,["modelValue"])]),(0,r._)("div",o,[(0,r.Wm)(f,{type:"image",accept:"image/png,image/jpeg",title:l.TITLE.image,image_src:l.image_src,onFileChange:l.fileChange},null,8,["title","image_src","onFileChange"])])]})),_:1}),(0,r.Wm)(_,{initial_value:l.product.description,placeholder:"...請輸入產品描述"},null,8,["initial_value"])],64)}]])},7965:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(9200),i={class:"bg-white rounded-md border-gray-500"},a={class:"p-4"},o={class:"grid grid-cols-6 gap-4 items-center"};const l={components:{},props:{input_cols:{type:Array,default:function(){return[{col_span:"col-span-2",component:"input-text-vue",trim:!0,title:String,model:String,func_call:String,func_datas:Array}]}},data_source:{type:Object||Array,default:function(){return{}||[]}}}};const u=(0,n(3744).Z)(l,[["render",function(e,t,n,l,u,s){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",a,[(0,r._)("div",o,[(0,r.WI)(e.$slots,"form_items")])])])}]])},8108:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(9200),i={class:"w-[90%] lg:w-[95%] h-[95%] bg-white rounded-lg p-3 relative"},a={class:"h-full flex items-center justify-center"},o=["src"];var l=n(2262),u=n(4825),s=n(604),c=n(6252);const p={components:{InMask:s.Z,PreviewButton:u.Z},props:{src:{type:String||Array,default:""}},setup:function(e){var t=(0,c.Fl)((function(){return e.src})),n=(0,l.iH)(!1);return{src:t,toggle:n,toggleShowPreview:function(){n.value=!n.value}}}};const d=(0,n(3744).Z)(p,[["render",function(e,t,n,l,u,s){var c=(0,r.up)("preview-button"),p=(0,r.up)("svg-render-vue"),d=(0,r.up)("InMask");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(c,{onClick:l.toggleShowPreview},null,8,["onClick"]),(0,r.wy)((0,r.Wm)(d,{class:"!fixed"},{default:(0,r.w5)((function(){return[(0,r._)("div",i,[(0,r._)("div",{class:"p-2 m-3 hover:cursor-pointer absolute top-0 left-0",onClick:t[0]||(t[0]=function(){return l.toggleShowPreview&&l.toggleShowPreview.apply(l,arguments)})},[(0,r.Wm)(p,{type:"return",class:"text-blue-500"})]),(0,r._)("div",a,[(0,r._)("img",{src:l.src,class:"max-w-[300px] md:max-w-[400px] lg:max-w-[500px] max-h-[90%]"},null,8,o)])])]})),_:1},512),[[r.F8,l.toggle]])],64)}]])},4825:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9200),i={class:"bg-slate-200 hover:bg-slate-300"},a=(0,r._)("span",null,"預覽",-1);const o={};const l=(0,n(3744).Z)(o,[["render",function(e,t,n,o,l,u){var s=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("button",i,[(0,r.Wm)(s,{type:"preview",class:"mr-1"}),a])}]])},6586:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9200),i={class:"bg-blue-500 hover:bg-blue-400 text-white"},a=(0,r._)("span",null,"儲存",-1);const o={};const l=(0,n(3744).Z)(o,[["render",function(e,t,n,o,l,u){var s=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("button",i,[(0,r.Wm)(s,{type:"save",class:"mr-1"}),a])}]])},6099:(e,t,n)=>{n.d(t,{Z:()=>C});var r=n(9200),i={class:"grid gap-2 grid-flow-col auto-cols-max items-center"},a={class:"font-bold"},o={key:0,class:"text-red-500"},l={class:"overflow-hidden whitespace-nowrap text-ellipsis w-20"},u=["accept"];var s=n(7757),c=n.n(s),p=n(6252),d=n(2262),m={class:"text-white bg-cyan-400 hover:bg-cyan-500 hover:cursor-pointer"};const g={props:{svg_name:{type:String,default:""},target_text:{type:String,default:""}},setup:function(e){return{target_text:e.target_text,svg_name:e.svg_name}}};var f=n(3744);const v=(0,f.Z)(g,[["render",function(e,t,n,i,a,o){var l=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("button",m,[(0,r.Wm)(l,{type:i.svg_name,class:"mr-1"},null,8,["type"]),(0,r._)("span",null,"上傳"+(0,r.zw)(i.target_text),1)])}]]);var _=n(8108),y=n(4825),h={class:"bg-red-500 hover:bg-red-400 hover:cursor-pointer text-white"},b=(0,r._)("span",null,"刪除",-1);const w={},x=(0,f.Z)(w,[["render",function(e,t,n,i,a,o){var l=(0,r.up)("svg-render-vue");return(0,r.wg)(),(0,r.iD)("button",h,[(0,r.Wm)(l,{type:"delete",class:"mr-1"}),b])}]]);var k=n(8637);function Z(e,t,n,r,i,a,o){try{var l=e[a](o),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,i)}const S={components:{UploadButtonVue:v,PreviewButtonVue:y.Z,DeleteButtonVue:x,ImagePreviewVue:_.Z},props:{title:{type:String,default:""},required:{type:Boolean,default:!1},accept:{type:String,default:""},type:{type:String,default:""},image_src:{type:[String,File],default:""}},emits:{fileChange:{type:Object,default:function(){}}},setup:function(e,t){var n=t.emit,r=(0,k.oR)().dispatch,i=(0,d.iH)(),a=(0,d.BK)(e),o=a.title,l=a.required,u=a.accept,s=a.type,m=a.image_src,g=(0,d.iH)(""),f=(0,d.iH)(""),v=function(){var e,t=(e=c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files.length>0)){e.next=7;break}if(g.value=t.target.files[0].name,n("fileChange",t.target.files[0]),"image"!==s.value){e.next=7;break}return e.next=6,r("readImageAsDataUrl",t.target.files[0]);case 6:f.value=e.sent;case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Z(a,r,i,o,l,"next",e)}function l(e){Z(a,r,i,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();return(0,p.bv)((function(){g.value=m.value,f.value=m.value})),{inputDOM:i,title:o,required:l,accept:u,type:s,img_data:f,file_name:g,target_text:{image:"圖片"},fileChange:v,deleteFile:function(){g.value="",n("fileChange",{}),"image"===s.value&&(f.value="")}}}},C=(0,f.Z)(S,[["render",function(e,t,n,s,c,p){var d=(0,r.up)("upload-button-vue"),m=(0,r.up)("delete-button-vue"),g=(0,r.up)("image-preview-vue");return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",a,[s.required?((0,r.wg)(),(0,r.iD)("span",o,"* ")):(0,r.kq)("",!0),(0,r._)("span",null,(0,r.zw)(s.title),1)]),(0,r.Wm)(d,{svg_name:s.type,target_text:s.target_text[s.type],onClick:t[0]||(t[0]=function(e){return s.inputDOM.click()})},null,8,["svg_name","target_text"]),s.img_data?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",l,(0,r.zw)(s.file_name),1),(0,r.Wm)(m,{onClick:s.deleteFile},null,8,["onClick"]),(0,r.Wm)(g,{src:s.img_data},null,8,["src"])],64)):(0,r.kq)("",!0),(0,r._)("input",{type:"file",onChange:t[1]||(t[1]=function(){return s.fileChange&&s.fileChange.apply(s,arguments)}),accept:s.accept,ref:"inputDOM",hidden:""},null,40,u)])}]])},3325:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(9200),i={class:"font-bold"},a={key:0,class:"text-red-500"},o={class:"w-full py-1"},l=["value"],u=(0,r._)("option",{value:"",disabled:""},"請選擇",-1),s=["value"],c=["label"],p=["value"];var d=n(8637);const m={inheritAttrs:!1,props:{title:{type:String,default:""},required:{type:Boolean,default:!1},option_group:{type:Object||Array,default:function(){return[]||0}},options:{type:Array,default:function(){return[]}},valChangeFun:{type:String,default:""}},emits:{"update:modelValue":{type:String,default:""}},setup:function(e,t){var n=t.attrs,r=t.emit,i=(0,d.oR)().dispatch,a=e.title,o=e.required,l=e.options,u=e.option_group,s=e.valChangeFun;return{title:a,required:o,option_group:u,options:l,emitInput:function(e){s&&i(s,e.target.value),r("update:modelValue",e.target.value)},attrs:n}}};const g=(0,n(3744).Z)(m,[["render",function(e,t,n,d,m,g){return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",i,[d.required?((0,r.wg)(),(0,r.iD)("span",a,"* ")):(0,r.kq)("",!0),(0,r._)("span",null,(0,r.zw)(d.title),1)]),(0,r._)("div",o,[(0,r._)("select",{class:"font-bold w-full h-[40px] border-gray-500 border-opacity-50 border-[1px] border-solid rounded-[10px] pl-2",value:d.attrs.modelValue,onChange:t[0]||(t[0]=function(){return d.emitInput&&d.emitInput.apply(d,arguments)})},[u,d.options.length?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(d.options,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,r.zw)(e.name),9,s)})),128)):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(d.option_group,(function(e,t){return(0,r.wg)(),(0,r.iD)("optgroup",{key:t,label:t},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e,(function(e){return(0,r.wg)(),(0,r.iD)("option",{key:e.id,value:e.id},(0,r.zw)(e.name),9,p)})),128))],8,c)})),128))],40,l)])],64)}]])},1014:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(9200),i={class:"input_single_checkbox w-full"},a={class:"py-1"},o=["checked"],l={for:"field",class:"font-bold px-1"};var u=n(6252),s=n(2262);const c={inheritAttrs:!1,props:{title:{type:String,default:""},focus:{type:Boolean,default:!1}},emits:{"update:modelValue":{type:String,default:""}},setup:function(e,t){var n=t.attrs,r=t.emit,i=(0,s.iH)(null);return(0,u.bv)((function(){e.focus&&i.value.focus()})),{props:e,attrs:n,field:i,emitInput:function(e){r("update:modelValue",e.target.checked)}}}};var p=n(3379),d=n.n(p),m=n(3973),g={insert:"head",singleton:!1};d()(m.Z,g);m.Z.locals;const f=(0,n(3744).Z)(c,[["render",function(e,t,n,u,s,c){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",a,[(0,r._)("input",(0,r.dG)({name:"field",type:"checkbox"},u.attrs,{ref:"field",checked:u.attrs.modelValue,onInput:t[0]||(t[0]=function(){return u.emitInput&&u.emitInput.apply(u,arguments)})}),null,16,o),(0,r._)("label",l,(0,r.zw)(u.props.title),1)])])}]])},6695:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(9200),i={class:"font-bold"},a={key:0,class:"text-red-500"},o={class:"font-MicrosoftJhengHei"},l={class:"w-full py-1"},u=["type","value"];var s=n(6252),c=n(2262);const p={inheritAttrs:!1,props:{title:{type:String,default:""},focus:{type:Boolean,default:!1},trim:{type:Boolean,default:!0},isNumber:{type:Boolean,default:!1},required:{type:Boolean,default:!1},type:{type:String,default:"text"}},emits:{"update:modelValue":{type:String,default:""}},setup:function(e,t){var n=t.attrs,r=t.emit,i=(0,c.iH)(),a=e.title,o=e.trim,l=e.focus,u=e.isNumber,p=e.type,d=(0,s.Fl)((function(){return e.required}));return(0,s.bv)((function(){l&&i.value.focus()})),{title:a,attrs:n,required:d,field:i,emitInput:function(e){var t=e.target.value;o&&(t=t.trim()),u&&(t=t.replace(/[^0-9]/gi,"")),r("update:modelValue",t)},type:p}}};const d=(0,n(3744).Z)(p,[["render",function(e,t,n,s,c,p){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",i,[s.required?((0,r.wg)(),(0,r.iD)("span",a,"* ")):(0,r.kq)("",!0),(0,r._)("span",o,(0,r.zw)(s.title),1)]),(0,r._)("div",l,[(0,r._)("input",(0,r.dG)({class:"w-full h-[40px] border-gray-500 border-opacity-50 border-[1px] rounded-md pl-4",type:s.type||"text"},s.attrs,{ref:"field",value:s.attrs.modelValue,onInput:t[0]||(t[0]=function(){return s.emitInput&&s.emitInput.apply(s,arguments)})}),null,16,u)])])}]])},4146:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(9200),i={class:"bg-white no-tailwind-base"},a={id:"tinymce_toolbar",class:"sticky z-[2] top-0 h-[78px]"},o=["innerHTML"];var l=n(6252),u=n(2262),s=n(2119);const c={props:{initial_value:{type:String,default:""},placeholder:{type:String,default:"...請輸入文字"}},setup:function(e){var t=(0,u.iH)(!1),n=(0,u.BK)(e),r=n.initial_value,i={selector:"#tinymce_editor",inline:!0,placeholder:n.placeholder.value,fixed_toolbar_container:"#tinymce_toolbar",toolbar_persist:!0,language_url:"../../assets/tinymce/langs/zh_TW.js",language:"zh_TW",images_upload_url:"/api/article/admin/uploadArticlePic",images_upload_base_path:"/",convert_urls:!1,block_unsupported_drop:!0,plugins:"preview searchreplace autolink link image table autoresize autosave charmap code emoticons\n            help insertdatetime lists media quickbars template wordcount",toolbar:"newdocument preview restoredraft | undo redo searchreplace | \n      formatting text lists| alignment paragraphs styles|insertion|code wordcount help",toolbar_groups:{formatting:{icon:"format",tooltip:"格式",items:"color bold italic strikethrough underline| superscript subscript | removeformat"},text:{icon:"change-case",tooltip:"文字",items:"forecolor backcolor lineheight |  fontfamily fontsize"},alignment:{icon:"align-left",tooltip:"對齊",items:"alignleft aligncenter alignright alignjustify | outdent indent"},paragraphs:{icon:"paragraph",tooltip:"段落",items:"H1 h2 h3 h4 h5 h6 div"},lists:{icon:"ordered-list",tooptip:"列表",items:"numlist bullist"},insertion:{icon:"plus",tooltip:"新增",items:"image media table |hr link emoticons charmap insertdatetime | template "}},quickbars_insert_toolbar:" image media table |hr link emoticons charmap insertdatetime | template",quickbars_selection_toolbar:"quicklink| styles | forecolor backcolor fontfamily fontsize",autosave_interval:"30s",toolbar_sticky:!0,contextmenu:"redo undo",skin:"tinymce-5",templates:[{title:"Date modified example",description:"Adds a timestamp indicating the last time the document modified.",content:'<p>Last Modified: <time class="mdate">This will be replaced with the date modified.</time></p>'}]};return(0,l.bv)((function(){tinymce.init(i),console.log("tinymce->",e),e.initial_value&&tinymce.get("tinymce_editor").setContent(e.initial_value),t.value=!0})),(0,s.iS)((function(){tinymce.get("tinymce_editor").destroy()})),{initial_value:r,show:t}}};var p=n(3379),d=n.n(p),m=n(1946),g={insert:"head",singleton:!1};d()(m.Z,g);m.Z.locals;const f=(0,n(3744).Z)(c,[["render",function(e,t,n,l,u,s){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.Wm)(r.uT,{name:"fade"},{default:(0,r.w5)((function(){return[(0,r.wy)((0,r._)("div",a,null,512),[[r.F8,l.show]])]})),_:1}),(0,r._)("div",{id:"tinymce_editor",class:"bg-white article-box min-h-[20rem] px-3 py-1",innerHTML:l.initial_value},null,8,o)])}]])},5431:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(9200),i={class:"flex items-center justify-between"},a={class:"grid grid-flow-col gap-4"};var o=n(6252),l=n(8637);const u={props:{title:{type:String,default:"管理"},return_to_route_name:{type:String,default:""},py:{type:String,default:""}},setup:function(e){var t=(0,l.oR)().commit,n=e.return_to_route_name,r=e.py;return{title:(0,o.Fl)((function(){return e.title})),return_to_route_name:n,py:r,commit:t}}};const s=(0,n(3744).Z)(u,[["render",function(e,t,n,o,l,u){var s=(0,r.up)("svg-render-vue"),c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",i,[o.return_to_route_name?((0,r.wg)(),(0,r.j4)(c,{key:0,to:{name:o.return_to_route_name},class:"text-blue-500",onClick:t[0]||(t[0]=function(e){return o.commit("clearStatus")})},{default:(0,r.w5)((function(){return[(0,r.Wm)(s,{type:"return",size:"lg"})]})),_:1},8,["to"])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"return_router"),(0,r._)("div",{class:(0,r.C_)(["flex-auto px-2 py-4 font-bold text-2xl",o.py])},(0,r.zw)(o.title),3),(0,r._)("div",a,[(0,r.WI)(e.$slots,"button")])])}]])}}]);